{
    "type": "index_parallel",
    "spec": {
      "ioConfig": {
        "type": "index_parallel",
        "inputSource" : {
          "type" : "local",
          "baseDir" : "BASE_DIR",
          "filter" : "*.json.gz"
        },
        "inputFormat": {
          "type": "json"
        },
        "appendToExisting": false
      },
      "tuningConfig": {
        "type": "index_parallel",
        "partitionsSpec": {
          "type": "dynamic"
        },
        "maxNumConcurrentSubTasks": 2,
        "maxTotalRows": 100000
      },
      "dataSchema": {
        "dataSource": "DATA_SOURCE",
        "granularitySpec": {
          "type": "uniform",
          "segmentGranularity": "DAY",
          "queryGranularity": "MINUTE",
          "rollup": true
        },
        "timestampSpec": {
          "column": "StatusChangeTimestamp",
          "format": "iso"
        },
        "dimensionsSpec": {
          "dimensions": [
            "ACCESSHOME",
            "ADDITIONALCAN1",
            "ADDITIONALCAN2",
            "ADDITIONALCAN3",
            "ADDITIONALCAN4",
            "ADDITIONALCAN5",
            "ADDL_PARKING",
            "ASNTRNFEE4",
            "AssocTrFee3",
            "BDRM2LEVEL",
            "BDRM3LEVEL",
            "BDRM4LEVEL",
            "BDRM5LEVEL",
            "BFSTRMLEVEL",
            "Bedrooms",
            "Block",
            "Building",
            "CURRENTLYLEASED",
            "CityTax",
            "CondoName",
            "CountyTax",
            "DINRLEVEL",
            "ENTRMLEVEL",
            "ElemSchl",
            "EnergyEff",
            "EntryLevel",
            "FAMRMLEVEL",
            "FEESIMPLE",
            "FULLANDHALFBATHS",
            "FullBaths",
            "GreenCert",
            "GreenFeat",
            "HOAFee",
            "HOAFreq",
            "HOAFreq2",
            "HOAFreq3",
            "HOANAME",
            "HOANAME4",
            "HOAName3_CO",
            "HOAPHONE",
            "HOAPHONE2",
            "HOAPHONE3",
            "HOAPHONE4",
            "HOAWEBSITE",
            "HOAWEBSITE2",
            "HOAWEBSITE3",
            "HOAWEBSITE4",
            "HalfBaths",
            "HighSchl",
            "INTERNETADDRESS",
            "KITLEVEL",
            "LA1_LoginName",
            "LA1_OfficePhone",
            "LA1_UserFirstName",
            "LA1_UserLastName",
            "LEASEXD",
            "LFD_ACCESSIBILITY_190_N",
            "LFD_AIRCONDITIONING_188_N",
            "LFD_COMMONAREAAMENITIES_31_N",
            "LFD_CONDOMINIUMMANAGEMENT_48_N",
            "LFD_EXTERIOR_191_N",
            "LFD_FEEINCLUDES_33_N",
            "LFD_FIREPLACE_189_N",
            "LFD_FLOOR_183_N",
            "LFD_FOUNDATION_252_N",
            "LFD_HEATINGFUEL_187_N",
            "LFD_HEATING_186_N",
            "LFD_INCLUSIONS_10_N",
            "LFD_INCLUSIONS_194_N",
            "LFD_INTERIORFEATURES_37_N",
            "LFD_MASTERBATH_35_N",
            "LFD_MASTERBEDROOM_34_N",
            "LFD_MISCELLANEOUS_50_N",
            "LFD_OCCUPANCY_180_N",
            "LFD_PARKING_32_N",
            "LFD_POSSESSION_181_N",
            "LFD_PROPOSEDTERMS_193_N",
            "LFD_ROOF_251_N",
            "LFD_UNITLEVELS_29_N",
            "LFD_UNITSEXTERIORFEATURES_36_N",
            "LFD_WINDOWCONVERINGS_185_N",
            "LFD_WINDOWCOVERINGS_228_N",
            "LM_Char10_1",
            "LM_Char10_12",
            "LM_Char10_13",
            "LM_Char10_14",
            "LM_Char10_15",
            "LM_Char10_16",
            "LM_Char10_17",
            "LM_Char10_19_N",
            "LM_Char10_21",
            "LM_Char10_22",
            "LM_Char10_3",
            "LM_Char10_5",
            "LM_Char10_8",
            "LM_Char25_1",
            "LM_Char25_10",
            "LM_Char25_12",
            "LM_Char25_2",
            "LM_Char25_3",
            "LM_Char25_4",
            "LM_Char25_5",
            "LM_Char25_6",
            "LM_Char25_7",
            "LM_Char25_8",
            "LM_Char50_1",
            "LM_Dec_19",
            "LM_Dec_20",
            "LM_Dec_6",
            "LM_Dec_7",
            "LM_Int1_1",
            "LM_Int1_10",
            "LM_Int1_11",
            "LM_Int1_12",
            "LM_Int1_13",
            "LM_Int1_14",
            "LM_Int1_15",
            "LM_Int1_16",
            "LM_Int1_17",
            "LM_Int1_18",
            "LM_Int1_19",
            "LM_Int1_2",
            "LM_Int1_20",
            "LM_Int1_3",
            "LM_Int1_4",
            "LM_Int1_5",
            "LM_Int1_6",
            "LM_Int1_7",
            "LM_Int1_8",
            "LM_Int1_9",
            "LM_Int2_1",
            "LM_Int2_10",
            "LM_Int2_11",
            "LM_Int2_12",
            "LM_Int2_2",
            "LM_Int2_3",
            "LM_Int2_4",
            "LM_Int2_5",
            "LM_Int2_6",
            "LM_Int2_7",
            "LM_Int2_8",
            "LM_Int2_9",
            "LM_Int4_9",
            "LM_char255_1",
            "LM_char30_2",
            "LM_char30_3",
            "LM_char5_1",
            "LO1AdStrNb",
            "LO1AdStrNm",
            "LO1City",
            "LO1Email",
            "LO1OfcType",
            "LO1Phone",
            "LO1State",
            "LO1Zip5",
            "LO1_OrganizationName",
            "LO1_ShortName",
            "LVRMLEVEL",
            "L_Address",
            "L_Address2",
            "L_AddressDirection",
            "L_AddressNumber",
            "L_AddressSearchNumber",
            "L_AddressStreet",
            "L_Area_N",
            "L_AskingPrice",
            "L_CDOM",
            "L_CDOMLS",
            "L_City",
            "L_Class_N",
            "L_ClosingDate",
            "L_ContractDate",
            "L_DOMLS",
            "L_HotSheetDate",
            "L_HowSold_N",
            "L_InputDate",
            "L_Last_Photo_updt",
            "L_ListOffice1",
            "L_ListingDate",
            "L_ListingID",
            "L_OffMarketDate",
            "L_OriginalPrice",
            "L_PictureCount",
            "L_PriceDate",
            "L_Remarks",
            "L_SaleRent_N",
            "L_SellingAgent1",
            "L_SellingOffice1",
            "L_SoldPrice",
            "L_SquareFeet",
            "L_State",
            "L_StatusDate",
            "L_StatusID",
            "L_Status_N",
            "L_SystemPrice",
            "L_Type_CO_N",
            "L_UpdateDate",
            "L_Zip",
            "L_Zip6",
            "L_ZipCode",
            "LglDsc_Lot",
            "LotSize",
            "LotSizeDim",
            "MBR2LEVEL",
            "MBRCLOSETLEN",
            "MBRCLOSETLEVEL",
            "MBRCLOSETWID",
            "MBRLEVEL",
            "MBTHLEVEL",
            "MULTIPLECANS",
            "Mbr2Len",
            "Mbr2Wid",
            "MidSchl",
            "MnthlyLse",
            "NoGarSpc",
            "NoPrkSpcs",
            "OLDHOANM",
            "OTHRM2LEVEL",
            "OTHRMLEVEL",
            "OtRmUse",
            "OtherTax",
            "POTSSINFO",
            "POTSSYN",
            "PYMNTFREQ2",
            "PYMNTFREQ3",
            "PYMNTFREQ4",
            "PrceOrSQFT",
            "RETS_LAGENTID",
            "RETS_LOFFICEID",
            "RecentRehab",
            "SELLCONCDESC",
            "SQFTORACRE",
            "STYOROFLEVEL",
            "SchoolTax",
            "Security_N",
            "SourceSQFT_N",
            "Stories",
            "Subdivision",
            "Subdivision_Lgl",
            "T_list_tax_property_id",
            "T_tax_db_id",
            "TaxYear",
            "TotalBath",
            "TotalTax",
            "TtlUnits",
            "UTLRMLEVEL",
            "UnitNo",
            "VAR_RATE_COM",
            "VOW",
            "VT_VTourURL",
            "YEARBUILT"
          ]
        },
        "transformSpec": {
          "filter": {
            "type": "selector",
            "dimension": "Status",
            "value": "Sold"
          },
          "transforms": [
            {
              "type": "expression",
              "name": "ListPricePerSqft",
              "expression": "round(cast(\"L_AskingPrice\",'DOUBLE')/cast(\"L_SquareFeet\",'LONG'), 2)"
            }
          ]
        },
        "metricsSpec": [
          {
            "type": "count",
            "name": "count"
          }
        ]
      }
    }
  }
